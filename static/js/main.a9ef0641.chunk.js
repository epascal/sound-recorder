(this["webpackJsonpsound-recorder"]=this["webpackJsonpsound-recorder"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(8),o=n.n(c),i=(n(14),n(7)),s=n.n(i),u=n(9),l=n(2),d=n(5);n(16);var j=n(0),b=function(e){var t=e.stream,n=e.name,r=e.onDeleteHandler,a=e.onEditNameHandler,c=e.id;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("article",{id:c,children:[Object(j.jsx)("audio",{controls:"controls",src:t,preload:"auto",role:"application",children:"Sorry, your browser doesn't support recording audio."}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{className:"name",role:"presentation",children:n}),Object(j.jsx)("button",{onClick:function(){return function(e){a(e)}(c)},className:"editName",title:"Click to edit name",children:"\u270f\ufe0f"})]}),Object(j.jsx)("button",{onClick:function(){return function(e){r(e)}(c)},className:"delete",children:"Delete"})]})})};b.defaultProps={stream:{stream:"blob:http://localhost",name:"Default recording name",id:"id0"}};var f=b,m=(n(18),function(e){var t=e.stream,n="record-play",a=Object(r.useState)("Record"),c=Object(l.a)(a,2),o=c[0],i=c[1],s=Object(r.useState)([]),u=Object(l.a)(s,2),b=u[0],m=u[1],p=Object(r.useState)(n),O=Object(l.a)(p,2),h=O[0],v=O[1],g=[],x=function(e){var t,n=Object(d.a)(b),r=b.filter((function(t){return t.id===e&&t})),a=b.indexOf(r[0]),c=null!==(t=window.prompt("Enter a new name",r[0].name))&&void 0!==t?t:r[0].name;r[0].name=c,n.splice(a,1,r[0]),m(n)},w=function(e){var t=window.confirm("Are you sure you want to delete this recording?");if(!0===t){var n=b.filter((function(t){return e!==t.id}));m(Object(d.a)(n))}},S=function(e,t,n){var a=Object(r.useState)(null),c=Object(l.a)(a,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){if(null===o){var t=null;(t=new MediaRecorder(e)).onstop=n.onStop,t.onstart=n.onStart,t.ondataavailable=n.ondataavailable,i(t)}}),[t]),o}(t,h,{onStart:function(){},onStop:function(){var e=new Blob(g,{type:"audio/ogg; codecs=opus"});g=[];var t=window.URL.createObjectURL(e);m((function(e){return[].concat(Object(d.a)(e),[{stream:t,name:(new Date).toISOString().split(".")[0].split("T").join(" "),id:"id".concat(e.length)}])})),v(n),i("Record")},ondataavailable:function(e){g.push(e.data)}});return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){"Record"===o?(v("record-play recording-audio"),i("Stop"),S.start(1e3)):(i("Record"),S.stop())},className:h,children:o}),Object(j.jsx)("section",{children:b.map((function(e,t){var n="id".concat(t);return Object(j.jsx)(f,{stream:e.stream,name:e.name,id:e.id,onDeleteHandler:w,onEditNameHandler:x},n)}))})]})});n(19);var p=function(){var e=Object(r.useMemo)((function(){return{audio:!0}}),[]),t=Object(r.useState)(null),n=Object(l.a)(t,2),a=n[0],c=n[1],o=Object(r.useState)(null),i=Object(l.a)(o,2),d=i[0],b=i[1];return Object(r.useEffect)((function(){if(!a){var t=!1;return function(){var n=Object(u.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.mediaDevices.getUserMedia(e);case 3:r=n.sent,t||c(r),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t||b(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}()(),function(){t=!0,a&&(a.getAudioTracks&&a.getAudioTracks().map((function(e){return e.stop()})),a.stop&&a.stop())}}}),[e,a,d]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:"Sound Recorder"})}),Object(j.jsx)("main",{children:null===a?Object(j.jsx)("button",{className:"record-play",children:"\u2026"}):Object(j.jsx)(m,{stream:a})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,o=t.getTTFB;n(e),r(e),a(e),c(e),o(e)}))};o.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),O()}},[[20,1,2]]]);
//# sourceMappingURL=main.a9ef0641.chunk.js.map