(this["webpackJsonpsound-recorder"]=this["webpackJsonpsound-recorder"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){},18:function(e,t,n){},19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),o=n(8),a=n.n(o),i=(n(14),n(7)),s=n.n(i),u=n(9),d=n(2),l=n(3),j=(n(16),n(0)),b=function(e){var t=e.stream,n=e.name,r=e.onDeleteHandler,c=e.onEditNameHandler,o=e.id;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("article",{id:o,children:[Object(j.jsx)("audio",{controls:"controls",src:t,preload:"auto",role:"application",children:"Sorry, your browser doesn't support recording audio."}),Object(j.jsxs)("p",{children:[Object(j.jsx)("span",{className:"name",role:"presentation",children:n}),Object(j.jsx)("button",{onClick:function(e){c(e)},className:"editName",title:"Click to edit name",children:"\u270f\ufe0f"})]}),Object(j.jsx)("button",{onClick:function(e){r(e)},className:"delete",children:"Delete"})]})})};b.defaultProps={stream:{stream:"blob:http://localhost",name:"Default recording name",id:"id0"}};var f=b;n(18);var m=function(e){var t=function(e){var t=Object(r.useState)(!1),n=Object(d.a)(t,2),c=n[0],o=n[1],a=Object(r.useState)([]),i=Object(d.a)(a,2),s=i[0],u=i[1],j=Object(r.useState)([]),b=Object(d.a)(j,2),f=b[0],m=b[1],p=Object(r.useMemo)((function(){return new MediaRecorder(e)}),[e]);return p.onstop=function(){var e=new Blob(f,{type:"audio/ogg; codecs=opus"}),t=window.URL.createObjectURL(e);u((function(e){return[].concat(Object(l.a)(e),[{stream:t,name:(new Date).toISOString().split(".")[0].split("T").join(" "),id:"id".concat(window.performance.now().toString())}])})),m([]),o(!1)},p.onstart=function(){o(!0)},p.ondataavailable=function(e){m((function(t){return[].concat(Object(l.a)(t),[e.data])}))},{recorder:p,recordings:s,setRecordings:u,isRecording:c}}(e.stream),n=t.recorder,c=t.recordings,o=t.setRecordings,a=t.isRecording,i="record-play",s=Object(r.useMemo)((function(){return a?"".concat(i," recording-audio"):i}),[a]),u=Object(r.useMemo)((function(){return a?"Stop":"Record"}),[a]),b=function(e){var t,n=e.target.parentNode.parentNode.attributes.id.value,r=Object(l.a)(c),a=c.filter((function(e){return e.id===n&&e})),i=c.indexOf(a[0]),s=null!==(t=window.prompt("Enter a new name",a[0].name))&&void 0!==t?t:a[0].name;a[0].name=s,r.splice(i,1,a[0]),o(r)},m=function(e){var t=e.target.parentNode.attributes.id.value,n=window.confirm("Are you sure you want to delete this recording?");if(!0===n){var r=c.filter((function(e){return t!==e.id}));e.target.parentNode.classList.add("vanish"),setTimeout((function(){o(Object(l.a)(r))}),1e3)}};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("button",{onClick:function(){a?n.stop():n.start(1e3)},className:s,children:u}),Object(j.jsx)("section",{children:c.map((function(e,t){var n="id".concat(t);return Object(j.jsx)(f,{stream:e.stream,name:e.name,id:e.id,onDeleteHandler:m,onEditNameHandler:b},n)}))})]})};n(19);var p=function(){var e=Object(r.useMemo)((function(){return{audio:!0}}),[]),t=Object(r.useState)(null),n=Object(d.a)(t,2),c=n[0],o=n[1],a=Object(r.useState)(null),i=Object(d.a)(a,2),l=i[0],b=i[1];return Object(r.useEffect)((function(){if(!c){var t=!1;return function(){var n=Object(u.a)(s.a.mark((function n(){var r;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,navigator.mediaDevices.getUserMedia(e);case 3:r=n.sent,t||o(r),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),t||b(n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}()(),function(){t=!0,c&&(c.getAudioTracks&&c.getAudioTracks().map((function(e){return e.stop()})),c.stop&&c.stop())}}}),[e,c,l]),Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("header",{children:Object(j.jsx)("h1",{children:"Sound Recorder"})}),Object(j.jsx)("main",{children:null===c?Object(j.jsx)("button",{className:"record-play",children:"\u2026"}):Object(j.jsx)(m,{stream:c})})]})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),o(e),a(e)}))};a.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(p,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)})),O()}},[[20,1,2]]]);
//# sourceMappingURL=main.de0256bb.chunk.js.map